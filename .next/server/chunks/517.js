exports.id=517,exports.ids=[517],exports.modules={477:(a,b,c)=>{"use strict";function d(){let a=[];return{push(b,c){a.push({stage:b,detail:c,timestamp:new Date().toISOString()})},all:()=>a}}c.d(b,{h:()=>d})},1482:(a,b,c)=>{"use strict";async function d(a){let b=process.env.OPENAI_API_KEY,c=process.env.OPENAI_MODEL??"gpt-4.1-mini";if(!b)return null;let d=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({model:c,temperature:0,messages:a})});if(!d.ok)return null;let e=await d.json();return e.choices?.[0]?.message?.content??null}c.d(b,{e:()=>d})},2755:(a,b,c)=>{"use strict";c.d(b,{W:()=>s});var d=c(1482),e=c(9142),f=c(9456),g=c(477);let h=new Set(["create","build","make","design","generate","ui","page","screen","dashboard","app","website","for","with","and","the","a","an","to","of","in","on","from","that","this"]);function i(a){let b=0;for(let c=0;c<a.length;c+=1)b=31*b+a.charCodeAt(c)>>>0;return b}function j(a,b,c=0){return a[(b+c)%a.length]}function k(a){return Array.from(new Set(a.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(a=>a.length>2&&!h.has(a)))).slice(0,6)}function l(){let a=1;return(b,c,d)=>({id:`${b.toLowerCase()}-${a++}`,component:b,props:c,...d?{children:d}:{}})}function m(a){return a.split(" ").filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ")}function n(a){let b=k(a);return b.length?m(b.slice(0,2).join(" ")):"Workspace"}function o(a){let b=a.toLowerCase(),c=new Set;return/\bnavbar|header|top nav|navigation\b/.test(b)&&c.add("Navbar"),/\bsidebar|side nav|left nav\b/.test(b)&&c.add("Sidebar"),/\bcard|panel|widget|section\b/.test(b)&&c.add("Card"),/\binput|field|form|search|textbox|text box|login|signup|register\b/.test(b)&&c.add("Input"),/\bbutton|cta|submit|action\b/.test(b)&&c.add("Button"),/\btable|list|rows|columns|grid data\b/.test(b)&&c.add("Table"),/\bmodal|dialog|popup\b/.test(b)&&c.add("Modal"),/\bchart|graph|analytics|stats|trend|metrics\b/.test(b)&&c.add("Chart"),/\bdashboard|admin|portal|console\b/.test(b)&&(c.add("Navbar"),c.add("Sidebar"),c.add("Card"),c.add("Chart")),/\blogin|sign in|signup|register|auth\b/.test(b)&&(c.add("Card"),c.add("Input"),c.add("Button")),/\bfeed|social|linkedin|twitter|instagram\b/.test(b)&&(c.add("Navbar"),c.add("Sidebar"),c.add("Card"),c.add("Table")),c.size||(c.add("Navbar"),c.add("Card"),c.add("Input"),c.add("Button")),c}function p(a){let b=l(),c=/minimal|simple|clean|single column|stack/i.test(a)?"stack":/grid|cards layout|two columns/i.test(a)?"grid":"split",d=n(a),e=i(a.toLowerCase()),f=k(a),g=o(a),h=[],p=a.toLowerCase(),s=j(["Apply","Create","Save","Search","Launch"],e,1),t=j(["Reset","Clear","Cancel","Back","Filter"],e,2);if(g.has("Navbar")){let a=/\bfeed|social|linkedin\b/.test(p)?["Home","Network","Jobs","Messages","Alerts"]:j([["Overview","Discover","Updates","Settings"],["Home","Insights","Tasks","Team"],["Feed","Explore","Alerts","Profile"],["Summary","Pipelines","Reports","Preferences"]],e);h.push(b("Navbar",{title:`${d} UI`,links:a}))}if(g.has("Sidebar")){let a=/\becommerce|store|shop\b/.test(p)?["Catalog","Orders","Customers","Promotions","Analytics"]:/\bfeed|social|linkedin\b/.test(p)?["Feed","Profile","Connections","Groups","Events"]:j([["Dashboard","Projects","Timeline","Members","Settings"],["Workspace","Queue","Approvals","Analytics","Admin"],["Library","Collections","Bookmarks","Notifications","Help"],["Catalog","Operations","Billing","Users","Security"]],e,3);h.push(b("Sidebar",{title:`${d} Menu`,items:a}))}if(/\blogin|sign in|signup|register|auth\b/.test(p))h.push(b("Card",{title:`${d} Authentication`},[b("Input",{label:"Email",placeholder:"you@example.com"}),b("Input",{label:"Password",placeholder:"Enter password"}),b("Button",{label:/signup|register/.test(p)?"Create Account":"Sign In",variant:"primary"})]));else if(g.has("Card")){let a=[];if(g.has("Input")){let c=f[0]?`Search ${m(f[0])}`:"Search",e=f.length?`Find ${f.slice(0,2).join(" ")}`:`Find ${d.toLowerCase()} items`;a.push(b("Input",{label:"Search",placeholder:`Find ${d.toLowerCase()} items`})),a[a.length-1]=b("Input",{label:c,placeholder:e})}g.has("Button")&&(a.push(b("Button",{label:s,variant:"primary"})),a.push(b("Button",{label:t,variant:"secondary"}))),h.push(b("Card",{title:`${d} Controls`},a.length?a:void 0))}if(g.has("Table")){let a=/\bfeed|social|linkedin\b/.test(p)?[["Jane Doe","Product Designer","Connect"],["Arjun Rao","Software Engineer","Message"],["Nina Kim","Marketing Lead","Follow"]]:q(f,e),c=f.length>=2?[m(f[0]),m(f[1]),"Action"]:["Name","Status","Action"];h.push(b("Card",{title:`${d} Table`},[b("Table",{columns:c,rows:a})]))}if(g.has("Chart")){let a=r(e);h.push(b("Chart",{title:`${d} Metrics`,data:a}))}return(g.has("Modal")||/\bsettings|preferences\b/.test(p))&&h.push(b("Modal",{title:`${d} Settings`,open:!0},[b("Input",{label:"Display Name",placeholder:d}),b("Button",{label:"Save",variant:"primary"})])),h.length||h.push(b("Card",{title:`${d} Panel`},[b("Button",{label:"Continue",variant:"primary"})])),{mode:c,root:h}}function q(a,b){let c=m(a[0]??"Item"),d=m(a[1]??"Status"),e=m(a[2]??"Owner"),f=["Draft","Active","Review","Blocked","Done"],g=["View","Edit","Open","Inspect","Track"];return[[`${c} A`,j(f,b,1),`${e} 1`],[`${c} B`,j(f,b,2),`${e} 2`],[`${c} C`,j(f,b,3),j(g,b,4)],[`${d} D`,j(f,b,0),j(g,b,2)]]}function r(a){return["Mon","Tue","Wed","Thu","Fri","Sat"].map((b,c)=>({label:b,value:10+(a>>c%16)%26+2*c}))}async function s(a){let b,c=(0,g.h)(),h=(0,e.eh)(a.intent);c.push("safety",h.flagged?"Prompt injection pattern flagged":"No injection pattern detected");let j=a.regenerateFromScratch||/regenerate\s+from\s+scratch/i.test(h.clean);c.push("planner",`full_regenerate=${String(j)}`);let m=await (0,d.e)([{role:"system",content:f.Ir},{role:"user",content:(0,f.Wd)(h.clean,a.priorPlan)}]);if(m)try{let a=JSON.parse(m),b=(0,e.Oo)(a);if(b.valid)return c.push("planner","LLM plan accepted by schema validation"),{plan:b.plan,warnings:h.flagged?["Prompt injection patterns were sanitized"]:[],logs:c.all()};c.push("planner",`LLM plan rejected: ${b.error}`)}catch{c.push("planner","LLM plan was not valid JSON; falling back to deterministic planner")}return!a.priorPlan||j?(b=p(h.clean),c.push("planner","Applied generic intent-aware deterministic planning")):(b=function(a,b){var c;let d=structuredClone(b),e=a.toLowerCase();if(/minimal|simple|clean/.test(e)&&(d={...c=d,mode:"stack",root:c.root.map(a=>"Navbar"===a.component?{...a,props:{title:"Minimal UI",links:["Home","Settings"]}}:a)}),/\bsettings\s+modal|settings dialog|settings popup\b/.test(e)&&(d.root.some(a=>"Modal"===a.component)||d.root.push({id:`modal-${Date.now()}`,component:"Modal",props:{title:"Settings",open:!0},children:[{id:`input-${Date.now()}`,component:"Input",props:{label:"Theme",placeholder:"Light or Dark"}},{id:`save-${Date.now()}`,component:"Button",props:{label:"Save",variant:"primary"}}]})),/\bconvert to|change to|make it like|turn into\b/.test(e))return(d=p(a)).modificationInstructions=`Converted UI based on request: ${a}`,d;if(/\badd\b|\binclude\b|\binsert\b/.test(e)){let b=o(a),c=n(a),e=l();b.has("Chart")&&!d.root.some(a=>"Chart"===a.component)&&d.root.push(e("Chart",{title:`${c} Metrics`,data:r(i(a))})),b.has("Table")&&!d.root.some(a=>"Table"===a.component||(a.children??[]).some(a=>"Table"===a.component))&&d.root.push(e("Card",{title:`${c} Table`},[e("Table",{columns:["Name","Status","Action"],rows:q(k(a),i(a))})])),b.has("Input")&&!d.root.some(a=>(a.children??[]).some(a=>"Input"===a.component))&&d.root.push(e("Card",{title:`${c} Input`},[e("Input",{label:"Search",placeholder:`Find ${c.toLowerCase()} items`}),e("Button",{label:"Apply",variant:"primary"})]))}return d.modificationInstructions=a,d}(h.clean,a.priorPlan),c.push("planner","Applied deterministic incremental modification")),{plan:b,warnings:h.flagged?["Prompt injection patterns were sanitized"]:[],logs:c.all()}}},3844:(a,b,c)=>{"use strict";c.d(b,{S:()=>f});class d{list(){return[...this.versions].sort((a,b)=>a.createdAt<b.createdAt?1:-1)}latest(){return this.versions.length?this.versions[this.versions.length-1]:null}get(a){return this.versions.find(b=>b.id===a)??null}add(a){let b={...a,id:`v_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,createdAt:new Date().toISOString()};return this.versions.push(b),b}rollback(a){return this.get(a)}constructor(){this.versions=[]}}let e=globalThis,f=e.__versionStore??new d;e.__versionStore=f},5170:(a,b,c)=>{"use strict";c.d(b,{d:()=>g});var d=c(9498),e=c(477),f=c(9142);function g(a){let b=(0,e.h)(),c=(0,f.Oo)(a.plan);if(!c.valid)throw Error(`Generator received invalid plan: ${c.error}`);let g=Array.from(new Set(a.plan.root.flatMap(a=>(function a(b){let c=(b.children??[]).flatMap(b=>a(b));return[b.component,...c]})(a)))),h=g.filter(a=>!d.g.includes(a));if(h.length)throw Error(`Component whitelist violation: ${h.join(", ")}`);b.push("generator",`components=${g.join(",")}`);let i=`import { ${Array.from(new Set([...g,"Card","Button","Input","Table","Modal","Sidebar","Navbar","Chart"])).join(", ")} } from "@/components/ui";`,j=JSON.stringify(a.plan,null,2).replace(/`/g,"\\`"),k=`${i}

const uiPlanJson = \`${j}\`;

export default function GeneratedUI() {
  return (
    <main className="space-y-4">
${function(a,b){let c=a.map(a=>(function a(b,c=4){let d=" ".repeat(c),e=(b.children??[]).map(b=>a(b,c+2)).join("\n"),f=JSON.stringify(b.props);return e.length?`${d}<${b.component} {...${f}}>
${e}
${d}</${b.component}>`:`${d}<${b.component} {...${f}} />`})(a,6)).join("\n");return`
    <section className="${({stack:"space-y-4",grid:"grid grid-cols-1 gap-4 md:grid-cols-2",split:"grid grid-cols-1 gap-4 lg:grid-cols-[260px_1fr]"})[b]}">
${c}
    </section>
  `.trimEnd()}(a.plan.root,a.plan.mode)}
    </main>
  );
}
`,l=(0,f.lU)(k);if(!l.valid)throw Error(`Generated code failed safety checks: ${l.error}`);return b.push("generator","Generated code passed validation"),{code:k,usedComponents:g,logs:b.all()}}},6487:()=>{},8335:()=>{},8911:(a,b,c)=>{"use strict";c.d(b,{s:()=>g});var d=c(9456),e=c(1482),f=c(477);async function g(a){let b=(0,f.h)(),c=await (0,e.e)([{role:"system",content:d.Gy},{role:"user",content:(0,d.gM)(a.intent,a.plan,a.code)}]);if(c)return b.push("explainer","LLM explanation generated"),{explanation:c,logs:b.all()};b.push("explainer","Fallback explanation generated");let g=Array.from(new Set(a.plan.root.map(a=>a.component))).join(", ");return{explanation:[`Layout mode: ${a.plan.mode} was selected to match the requested information density and hierarchy.`,`Component selection: ${g}. All components come from the fixed deterministic library.`,a.isModification?"This is an incremental edit. Existing plan structure was preserved and only requested sections were updated.":"This was generated as a new baseline screen."].join("\n"),logs:b.all()}}},9142:(a,b,c)=>{"use strict";c.d(b,{Oo:()=>s,dw:()=>u,eh:()=>r,lU:()=>t});var d=c(4533),e=c(9498);let f=d.z.enum(e.g),g=d.z.lazy(()=>d.z.object({id:d.z.string().min(1),component:f,props:d.z.record(d.z.unknown()),children:d.z.array(g).optional()})),h=d.z.object({mode:d.z.enum(["stack","grid","split"]),root:d.z.array(g).min(1),modificationInstructions:d.z.string().optional()}),i=d.z.object({label:d.z.string().min(1),variant:d.z.enum(["primary","secondary"]).optional()}).strict(),j=d.z.object({title:d.z.string().min(1)}).strict(),k=d.z.object({label:d.z.string().min(1),placeholder:d.z.string().optional(),value:d.z.string().optional()}).strict(),l=d.z.object({columns:d.z.array(d.z.string()),rows:d.z.array(d.z.array(d.z.string()))}).strict(),m=d.z.object({title:d.z.string().min(1),open:d.z.boolean()}).strict(),n=d.z.object({title:d.z.string().min(1),items:d.z.array(d.z.string())}).strict(),o={Button:i,Card:j,Input:k,Table:l,Modal:m,Sidebar:n,Navbar:d.z.object({title:d.z.string().min(1),links:d.z.array(d.z.string())}).strict(),Chart:d.z.object({title:d.z.string().min(1),data:d.z.array(d.z.object({label:d.z.string(),value:d.z.number()}).strict())}).strict()},p=new Set(["Card","Modal"]),q=[/ignore\s+all\s+instructions/i,/system\s+prompt/i,/developer\s+message/i,/execute\s+code/i,/bypass\s+safety/i];function r(a){let b=q.some(b=>b.test(a));return{clean:a.replace(/[<>]/g,"").trim(),flagged:b}}function s(a){let b=h.safeParse(a);if(!b.success)return{valid:!1,error:b.error.flatten().formErrors.join("; ")||"Invalid plan schema"};let c=[];return(b.data.root.forEach((a,b)=>(function a(b,c,d){o[b.component].safeParse(b.props).success||c.push(`${d}: invalid props for ${b.component}`),!p.has(b.component)&&b.children?.length&&c.push(`${d}: ${b.component} does not allow children`),(b.children??[]).forEach((b,e)=>{a(b,c,`${d}.children[${e}]`)})})(a,c,`root[${b}]`)),c.length)?{valid:!1,error:c.join("; ")}:{valid:!0,plan:b.data}}function t(a){return a.includes('from "@/components/ui"')?/from\s+["'](?!@\/components\/ui)[^"']+["']/.test(a)?{valid:!1,error:"Generated code contains non-whitelisted imports"}:/style=\{\{/.test(a)?{valid:!1,error:"Inline styles are forbidden"}:/dangerouslySetInnerHTML/.test(a)?{valid:!1,error:"dangerouslySetInnerHTML is forbidden"}:{valid:!0}:{valid:!1,error:"Generated code must import from deterministic UI library"}}function u(a,b){let c=[],d=100,f=a.split("\n").length,g=(a.match(/<[A-Za-z][A-Za-z0-9]*/g)??[]).length,h=(a.match(/^import\s+/gm)??[]).length;/dangerouslySetInnerHTML/.test(a)&&(c.push({level:"error",code:"dangerous-html",message:"Found forbidden dangerouslySetInnerHTML usage."}),d-=50),/style=\{\{/.test(a)&&(c.push({level:"error",code:"inline-style",message:"Found forbidden inline style usage."}),d-=30),/className=\{`/.test(a)&&(c.push({level:"warning",code:"dynamic-class",message:"Detected dynamic class composition; review deterministic styling constraints."}),d-=10);let i=Array.from(new Set(Array.from(a.matchAll(/<([A-Z][A-Za-z0-9]*)\b/g)).map(a=>a[1]))),j=i.filter(a=>!e.g.includes(a)&&"GeneratedUI"!==a);j.length&&(c.push({level:"error",code:"illegal-component",message:`Detected non-whitelisted JSX components: ${j.join(", ")}`}),d-=40);let k=(function(a){let b=new Set,c=a=>{b.add(a.component),(a.children??[]).forEach(c)};return a.root.forEach(c),Array.from(b)})(b).filter(a=>!i.includes(a));return k.length&&(c.push({level:"warning",code:"missing-component",message:`Generated code does not render some planned components: ${k.join(", ")}`}),d-=15),c.length||c.push({level:"info",code:"clean",message:"Static analysis found no safety or policy violations."}),{score:Math.max(0,d),findings:c,metrics:{lineCount:f,jsxCount:g,importCount:h}}}},9456:(a,b,c)=>{"use strict";c.d(b,{Gy:()=>e,Ir:()=>d,Wd:()=>f,gM:()=>g});let d=`
You are PlannerAgent for Deterministic AI UI Builder.
Rules:
- Output strict JSON only.
- Use only these components: Button, Card, Input, Table, Modal, Sidebar, Navbar, Chart.
- Never invent new components.
- Prefer preserving existing hierarchy when prior plan exists.
- Full regeneration only if user intent explicitly says regenerate from scratch.
JSON schema keys:
{
  "mode": "stack|grid|split",
  "root": [{"id":"string","component":"...","props":{},"children":[]}],
  "modificationInstructions": "string optional"
}
`,e=`
You are ExplainerAgent for Deterministic AI UI Builder.
Explain:
1) Why layout mode was selected.
2) Why each component type was selected.
3) What changed vs prior version (if edit).
Keep explanation concise and technical.
`;function f(a,b){return`Intent:
${a}

Prior Plan:
${b?JSON.stringify(b,null,2):"null"}`}function g(a,b,c){return`Intent:
${a}

Plan:
${JSON.stringify(b,null,2)}

Code:
${c}`}},9498:(a,b,c)=>{"use strict";c.d(b,{g:()=>d});let d=["Button","Card","Input","Table","Modal","Sidebar","Navbar","Chart"]}};